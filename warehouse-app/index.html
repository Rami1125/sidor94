<!-- ... existing code ... -->
    <div id="loginView" class="view active">
        <div class="login-card glass-card">
            <h2>כניסת מנהל מחסן</h2>
            <input type="text" id="managerIdInput" placeholder="הזן קוד מנהל">
            <p id="loginError" style="color: red; min-height: 20px;"></p>
            <button id="loginBtn">כניסה</button>
        </div>
    </div>

    <div id="mainView" class="view">
<!-- ... existing code ... -->
        <script>
        // *** UNIFIED API URL ***
        const API_URL = 'https://script.google.com/macros/s/AKfycby_VQ0cAMNBGbCPJVHibQ-k32n0L2pM0NqnhgT27T5jIoKVCbxA8cGmGLspKY7eZvxU/exec';
        
        const loginView = document.getElementById('loginView');
// ... existing code ... -->
        const mainView = document.getElementById('mainView');
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const newOrdersList = document.getElementById('newOrdersList');
        const inProgressOrdersList = document.getElementById('inProgressOrdersList');
        const loginError = document.getElementById('loginError');

        let currentManager = null, refreshInterval, knownOrderIds = new Set();
        
        async function apiFetch(action, params = {}, method = 'GET', body = null) {
// ... existing code ... -->
            const response = await fetch(url, options);
            if (!response.ok) throw new Error(`Network error`);
            const result = await response.json();
            if (result.status !== 'success') throw new Error(result.message);
            return result.data;
        }

        window.OneSignalDeferred = window.OneSignalDeferred || [];
// ... existing code ... -->
            initializeApp();
        });

        function initializeApp() {
            loginBtn.addEventListener('click', onLogin);
            logoutBtn.addEventListener('click', onLogout);
            const loggedInManager = JSON.parse(sessionStorage.getItem('warehouseManager'));
            if (loggedInManager) initApp(loggedInManager);
        }
        
        async function onLogin() {
            const managerId = document.getElementById('managerIdInput').value.trim().toUpperCase();
            if(!managerId) return;
            
            loginBtn.disabled = true;
            loginBtn.textContent = 'מאמת...';
            loginError.textContent = '';

            try {
                const managerData = await apiFetch('validateWarehouseManager', {}, 'POST', { managerId });
                sessionStorage.setItem('warehouseManager', JSON.stringify(managerData));
                initApp(managerData);
            } catch (error) {
                loginError.textContent = `שגיאה: ${error.message}`;
            } finally {
                loginBtn.disabled = false;
                loginBtn.textContent = 'כניסה';
            }
        }

        function onLogout() {
            sessionStorage.removeItem('warehouseManager');
// ... existing code ... -->
